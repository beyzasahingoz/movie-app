<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Movie Guide App</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <div class="nav">
        <ul>
            <li><a href="movie.html"> <button id="main-btn"><img class="icon-element" src="./icon.png" alt="icon"></button></a></li>
            <li><a href="movie_rank.html"> <button id="m-list-btn">My Movie Ranking List</button></a></li>
            <li><a href="series_rank.html"> <button id="s-list-btn">My Series Ranking List</button></a></li>
            <li><a href="imdb_rank.html"> <button id="i-list-btn">IMDB Ranking List</button></a></li>
            <li><a href="latest_watch.html"> <button id="l-list-btn">Latest Watch</button></a></li>
        </ul>
    </div>
    <script>
        const listEl = document.querySelector('ul');
        let pageNumber = 1;
        const perPage = 4;
        let currentData = [];
        fetch('./movies.json')
            .then(res => res.json())
            .then(data => {
                currentData = data;
                renderList(data, pageNumber, perPage);
            });
        function renderList(data, pageNumber, perPage) {
            listEl.innerHTML = '';
            const startIndex = (pageNumber - 1) * perPage;
            const endIndex = startIndex + perPage;
            const filteredData = data.slice(startIndex, endIndex);
            filteredData.forEach(post => {
                listEl.insertAdjacentHTML('beforeend', `
        <div class="list-container">
        <li>
            <div class="details">
                <h4>${post.rank} -</h4>
                <h4>${post.name}</h4>
            </div>
            <div class="rating">
            <h5>${post.director_name}</h5>
        </div>
            <div class="rating">
                <h5>${post.imdb_rating}</h5>
            </div>

            <div class="details">
                <h5>${post.year}</h5>
                <h5>${post.genre}</h5>

            </div>
        </li>
        </div>
    `);
            });
            renderPagination(data, pageNumber, perPage);
        }
        function renderPagination(data, pageNumber, perPage) {
            const paginationEl = document.querySelector('.pagination');
            paginationEl.innerHTML = '';

            const pageCount = Math.ceil(data.length / perPage);

            for (let i = 1; i <= pageCount; i++) {
                const btn = document.createElement('button');
                btn.innerText = i;
                btn.classList.add('pagination-btn');

                if (i === pageNumber) {
                    btn.classList.add('active');
                }

                btn.addEventListener('click', () => {
                    pageNumber = i;
                    renderList(data, pageNumber, perPage);
                    renderPagination(data, pageNumber, perPage);
                });

                paginationEl.appendChild(btn);
            }
        }
    </script>
    <div class="pagination">
        <a>&laquo;</a>
    </div>
</body>

</html>